---
import Container from "@/components/container.astro";
import Layout from "@/layouts/Layout.astro";
import Link from "@/components/ui/link.astro";
import { Icon } from "astro-icon/components";
import MetricCard from "@/components/wireframes/MetricCard.astro";
import ChartWidget from "@/components/wireframes/ChartWidget.astro";
import DataTable from "@/components/wireframes/DataTable.astro";
import DashboardSidebar from "@/components/wireframes/DashboardSidebar.astro";
import ActivityFeed from "@/components/wireframes/ActivityFeed.astro";
---

<Layout title="Dashboard - Wireframe Landing Page">
  <div class="min-h-screen flex">
    <!-- Dashboard Sidebar -->
    <DashboardSidebar 
      userInfo={{
        name: "Sarah Johnson",
        role: "Marketing Manager",
        avatar: "user-avatar.jpg"
      }}
      navigation={[
        { label: "Overview", icon: "bx:bx-home", href: "#", active: true },
        { label: "Analytics", icon: "bx:bx-bar-chart-alt-2", href: "#" },
        { label: "Sales", icon: "bx:bx-shopping-bag", href: "#" },
        { label: "Customers", icon: "bx:bx-group", href: "#" },
        { label: "Products", icon: "bx:bx-package", href: "#" },
        { label: "Orders", icon: "bx:bx-list-ul", href: "#" },
        { label: "Marketing", icon: "bx:bx-bullhorn", href: "#" },
        { label: "Reports", icon: "bx:bx-file", href: "#" },
        { label: "Settings", icon: "bx:bx-cog", href: "#" }
      ]}
      stats={{
        totalRevenue: "$124,563",
        totalOrders: "2,847",
        activeUsers: "18,249",
        conversionRate: "3.2%"
      }}
    />

    <!-- Main Dashboard Content -->
    <main class="flex-1" style="background-color: var(--color-theme-bg);">
      <!-- Dashboard Header -->
      <div class="wireframe-section border-b" style="border-color: var(--color-theme-stroke);">
        <Container class="py-6">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-4">
              <Link
                href="/wireframes"
                class="flex items-center gap-2 wireframe-text hover:underline"
                style="outline">
                <Icon name="bx:bx-arrow-back" class="w-4 h-4" />
                Back to Wireframes
              </Link>
              <div>
                <h1 class="wireframe-heading text-2xl lg:text-3xl mb-1">Dashboard Overview</h1>
                <p class="wireframe-text text-sm" style="color: var(--color-theme-tertiary);">
                  Welcome back, Sarah! Here's what's happening with your business today.
                </p>
              </div>
            </div>

            <!-- Header Actions -->
            <div class="flex items-center gap-3">
              <div class="wireframe-box doodle-border p-2 flex items-center gap-2">
                <Icon name="bx:bx-calendar" class="w-4 h-4" style="color: var(--color-theme-tertiary);" />
                <span class="wireframe-text text-sm">Last 30 days</span>
                <Icon name="bx:bx-chevron-down" class="w-4 h-4" style="color: var(--color-theme-tertiary);" />
              </div>
              <Link
                href="#"
                class="doodle flex items-center gap-2"
                size="sm"
                style="primary">
                <Icon name="bx:bx-download" class="w-4 h-4" />
                Export
              </Link>
            </div>
          </div>
        </Container>
      </div>

      <div class="p-6">
        <!-- Key Metrics Row -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          <MetricCard
            title="Total Revenue"
            value="$124,563"
            change="+12.5%"
            changeType="positive"
            icon="bx:bx-dollar-circle"
            subtitle="vs last month"
          />
          <MetricCard
            title="New Customers"
            value="1,249"
            change="+8.2%"
            changeType="positive"
            icon="bx:bx-user-plus"
            subtitle="this month"
          />
          <MetricCard
            title="Total Orders"
            value="2,847"
            change="-2.1%"
            changeType="negative"
            icon="bx:bx-shopping-bag"
            subtitle="vs last month"
          />
          <MetricCard
            title="Conversion Rate"
            value="3.2%"
            change="+0.4%"
            changeType="positive"
            icon="bx:bx-trending-up"
            subtitle="average"
          />
        </div>

        <!-- Charts Row -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
          <ChartWidget
            title="Revenue Overview"
            subtitle="Monthly revenue for the past 12 months"
            chartType="line"
            data={[
              { month: "Jan", value: 65000 },
              { month: "Feb", value: 72000 },
              { month: "Mar", value: 68000 },
              { month: "Apr", value: 84000 },
              { month: "May", value: 91000 },
              { month: "Jun", value: 124563 }
            ]}
            showControls={true}
          />
          
          <ChartWidget
            title="Sales by Category"
            subtitle="Product category performance this month"
            chartType="doughnut"
            data={[
              { category: "Electronics", value: 45, color: "var(--color-theme-button)" },
              { category: "Clothing", value: 25, color: "var(--color-theme-secondary)" },
              { category: "Home & Garden", value: 20, color: "var(--color-theme-tertiary)" },
              { category: "Sports", value: 10, color: "var(--color-theme-highlight)" }
            ]}
            showLegend={true}
          />
        </div>

        <!-- Data Tables and Activity Section -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
          <!-- Recent Orders Table -->
          <div class="lg:col-span-2">
            <DataTable
              title="Recent Orders"
              subtitle="Latest customer orders and their status"
              headers={["Order ID", "Customer", "Product", "Amount", "Status", "Date"]}
              data={[
                {
                  orderId: "#12847",
                  customer: "John Smith",
                  product: "iPhone 15 Pro",
                  amount: "$1,199",
                  status: "Completed",
                  statusType: "success",
                  date: "2 hours ago"
                },
                {
                  orderId: "#12846",
                  customer: "Sarah Wilson",
                  product: "MacBook Air",
                  amount: "$999",
                  status: "Processing",
                  statusType: "warning",
                  date: "4 hours ago"
                },
                {
                  orderId: "#12845",
                  customer: "Mike Johnson",
                  product: "AirPods Pro",
                  amount: "$249",
                  status: "Shipped",
                  statusType: "info",
                  date: "6 hours ago"
                },
                {
                  orderId: "#12844",
                  customer: "Emma Davis",
                  product: "Apple Watch",
                  amount: "$399",
                  status: "Pending",
                  statusType: "warning",
                  date: "8 hours ago"
                },
                {
                  orderId: "#12843",
                  customer: "Alex Brown",
                  product: "iPad Pro",
                  amount: "$799",
                  status: "Completed",
                  statusType: "success",
                  date: "1 day ago"
                }
              ]}
              showPagination={true}
              showActions={true}
            />
          </div>

          <!-- Activity Feed -->
          <div class="lg:col-span-1">
            <ActivityFeed
              title="Recent Activity"
              subtitle="Latest system and user activities"
              activities={[
                {
                  type: "order",
                  icon: "bx:bx-shopping-bag",
                  title: "New order received",
                  description: "Order #12847 from John Smith",
                  timestamp: "2 minutes ago",
                  color: "var(--color-theme-button)"
                },
                {
                  type: "user",
                  icon: "bx:bx-user-plus",
                  title: "New customer registered",
                  description: "Sarah Wilson joined the platform",
                  timestamp: "15 minutes ago",
                  color: "var(--color-theme-secondary)"
                },
                {
                  type: "product",
                  icon: "bx:bx-package",
                  title: "Inventory update",
                  description: "iPhone 15 Pro stock updated",
                  timestamp: "1 hour ago",
                  color: "var(--color-theme-tertiary)"
                },
                {
                  type: "payment",
                  icon: "bx:bx-credit-card",
                  title: "Payment processed",
                  description: "$1,199 payment confirmed",
                  timestamp: "2 hours ago",
                  color: "var(--color-theme-highlight)"
                },
                {
                  type: "system",
                  icon: "bx:bx-cog",
                  title: "System backup completed",
                  description: "Daily backup finished successfully",
                  timestamp: "3 hours ago",
                  color: "var(--color-theme-tertiary)"
                }
              ]}
              showViewAll={true}
            />
          </div>
        </div>

        <!-- Bottom Analytics Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- Top Products Table -->
          <DataTable
            title="Top Performing Products"
            subtitle="Best selling products this month"
            headers={["Product", "Category", "Sales", "Revenue", "Trend"]}
            data={[
              {
                product: "iPhone 15 Pro",
                category: "Electronics",
                sales: "234",
                revenue: "$280,566",
                trend: "+15%",
                trendType: "positive"
              },
              {
                product: "MacBook Air M2",
                category: "Electronics",
                sales: "156",
                revenue: "$155,844",
                trend: "+8%",
                trendType: "positive"
              },
              {
                product: "AirPods Pro 2",
                category: "Electronics",
                sales: "298",
                revenue: "$74,202",
                trend: "+22%",
                trendType: "positive"
              },
              {
                product: "Apple Watch Series 9",
                category: "Electronics",
                sales: "187",
                revenue: "$74,613",
                trend: "-3%",
                trendType: "negative"
              },
              {
                product: "iPad Pro 12.9",
                category: "Electronics",
                sales: "134",
                revenue: "$107,066",
                trend: "+12%",
                trendType: "positive"
              }
            ]}
            showSearch={false}
            compact={true}
          />

          <!-- Customer Analytics -->
          <div class="wireframe-box doodle-border p-6">
            <div class="flex items-center justify-between mb-6">
              <div>
                <h3 class="wireframe-heading text-lg mb-1">Customer Insights</h3>
                <p class="wireframe-text text-sm" style="color: var(--color-theme-tertiary);">
                  Key customer metrics and demographics
                </p>
              </div>
              <Icon name="bx:bx-group" class="w-6 h-6" style="color: var(--color-theme-button);" />
            </div>

            <div class="space-y-6">
              <!-- Customer Segments -->
              <div>
                <h4 class="wireframe-heading text-sm mb-3">Customer Segments</h4>
                <div class="space-y-3">
                  <div class="flex items-center justify-between">
                    <span class="wireframe-text text-sm">New Customers</span>
                    <div class="flex items-center gap-2">
                      <div class="w-24 h-2 rounded-full" style="background-color: var(--color-theme-stroke);">
                        <div class="w-3/5 h-full rounded-full" style="background-color: var(--color-theme-button);"></div>
                      </div>
                      <span class="wireframe-text text-sm">60%</span>
                    </div>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="wireframe-text text-sm">Returning Customers</span>
                    <div class="flex items-center gap-2">
                      <div class="w-24 h-2 rounded-full" style="background-color: var(--color-theme-stroke);">
                        <div class="w-2/5 h-full rounded-full" style="background-color: var(--color-theme-secondary);"></div>
                      </div>
                      <span class="wireframe-text text-sm">40%</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Average Order Value -->
              <div>
                <h4 class="wireframe-heading text-sm mb-3">Average Order Value</h4>
                <div class="wireframe-box doodle-border p-4 text-center">
                  <p class="wireframe-heading text-2xl mb-1">$127.50</p>
                  <p class="wireframe-text text-xs" style="color: var(--color-theme-button);">+$12.30 from last month</p>
                </div>
              </div>

              <!-- Customer Satisfaction -->
              <div>
                <h4 class="wireframe-heading text-sm mb-3">Customer Satisfaction</h4>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-1">
                    <Icon name="bx:bxs-star" class="w-4 h-4" style="color: #FFD700;" />
                    <Icon name="bx:bxs-star" class="w-4 h-4" style="color: #FFD700;" />
                    <Icon name="bx:bxs-star" class="w-4 h-4" style="color: #FFD700;" />
                    <Icon name="bx:bxs-star" class="w-4 h-4" style="color: #FFD700;" />
                    <Icon name="bx:bx-star" class="w-4 h-4" style="color: var(--color-theme-stroke);" />
                  </div>
                  <span class="wireframe-text text-sm">4.2/5 (1,234 reviews)</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Actions Footer -->
        <div class="mt-8 pt-6 border-t" style="border-color: var(--color-theme-stroke);">
          <div class="wireframe-box doodle-border p-6">
            <h3 class="wireframe-heading text-lg mb-4">Quick Actions</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
              <Link
                href="#"
                class="doodle flex items-center justify-center gap-2 p-4"
                style="outline">
                <Icon name="bx:bx-plus" class="w-5 h-5" />
                <span>Add Product</span>
              </Link>
              <Link
                href="#"
                class="doodle flex items-center justify-center gap-2 p-4"
                style="outline">
                <Icon name="bx:bx-user-plus" class="w-5 h-5" />
                <span>Invite User</span>
              </Link>
              <Link
                href="#"
                class="doodle flex items-center justify-center gap-2 p-4"
                style="outline">
                <Icon name="bx:bx-file-blank" class="w-5 h-5" />
                <span>Create Report</span>
              </Link>
              <Link
                href="#"
                class="doodle flex items-center justify-center gap-2 p-4"
                style="primary">
                <Icon name="bx:bx-cog" class="w-5 h-5" />
                <span>Settings</span>
              </Link>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</Layout>