---
import Container from "@/components/container.astro";
import Layout from "@/layouts/Layout.astro";
import Link from "@/components/ui/link.astro";
import { Icon } from "astro-icon/components";
import ProductGrid from "@/components/wireframes/ProductGrid.astro";
import FilterSidebar from "@/components/wireframes/FilterSidebar.astro";
import SearchBar from "@/components/wireframes/SearchBar.astro";
import SortControls from "@/components/wireframes/SortControls.astro";
---

<Layout title="Product Listing - Wireframe Landing Page">
  <!-- Header Section with Search -->
  <section class="wireframe-section py-8">
    <Container>
      <div class="flex items-center justify-between mb-8">
        <Link
          href="/wireframes"
          class="flex items-center gap-2 wireframe-text hover:underline"
          style="outline">
          <Icon name="bx:bx-arrow-back" class="w-4 h-4" />
          Back to Wireframes
        </Link>
        <h1 class="wireframe-heading text-2xl lg:text-3xl">Product Catalog</h1>
        <div class="w-24"></div> <!-- Spacer for centering -->
      </div>

      <!-- Search and Sort Controls -->
      <div class="flex flex-col lg:flex-row gap-4 items-center justify-between mb-8">
        <SearchBar 
          placeholder="Search products, brands, categories..."
          showFilters={true}
          class="flex-1 lg:max-w-md"
        />
        <SortControls 
          options={[
            { label: "Popularity", value: "popularity" },
            { label: "Price: Low to High", value: "price_asc" },
            { label: "Price: High to Low", value: "price_desc" },
            { label: "Newest First", value: "newest" },
            { label: "Customer Rating", value: "rating" }
          ]}
          defaultValue="popularity"
        />
      </div>

      <!-- Breadcrumb Navigation -->
      <div class="wireframe-box doodle-border p-4 mb-8">
        <nav class="flex items-center space-x-2 wireframe-text text-sm">
          <Link href="#" class="hover:underline">Home</Link>
          <Icon name="bx:bx-chevron-right" class="w-4 h-4" style="color: var(--color-theme-tertiary);" />
          <Link href="#" class="hover:underline">Electronics</Link>
          <Icon name="bx:bx-chevron-right" class="w-4 h-4" style="color: var(--color-theme-tertiary);" />
          <span style="color: var(--color-theme-tertiary);">Smartphones</span>
        </nav>
      </div>
    </Container>
  </section>

  <!-- Main Content Area -->
  <section class="wireframe-section pb-16">
    <Container>
      <div class="grid lg:grid-cols-4 gap-8">
        <!-- Sidebar Filters -->
        <aside class="lg:col-span-1">
          <FilterSidebar 
            categories={[
              { name: "Electronics", count: 1247, subcategories: ["Smartphones", "Laptops", "Tablets", "Accessories"] },
              { name: "Clothing", count: 892, subcategories: ["Men's", "Women's", "Kids", "Shoes"] },
              { name: "Home & Garden", count: 634, subcategories: ["Furniture", "Decor", "Kitchen", "Outdoor"] },
              { name: "Sports", count: 456, subcategories: ["Fitness", "Outdoor", "Team Sports", "Water Sports"] }
            ]}
            priceRanges={[
              { label: "Under $25", min: 0, max: 25, count: 234 },
              { label: "$25 - $50", min: 25, max: 50, count: 456 },
              { label: "$50 - $100", min: 50, max: 100, count: 678 },
              { label: "$100 - $250", min: 100, max: 250, count: 345 },
              { label: "Over $250", min: 250, max: null, count: 123 }
            ]}
            brands={[
              { name: "Apple", count: 89 },
              { name: "Samsung", count: 76 },
              { name: "Sony", count: 54 },
              { name: "Nike", count: 43 },
              { name: "Adidas", count: 38 }
            ]}
            ratings={[
              { stars: 5, count: 456 },
              { stars: 4, count: 789 },
              { stars: 3, count: 234 },
              { stars: 2, count: 67 },
              { stars: 1, count: 23 }
            ]}
          />
        </aside>

        <!-- Product Grid -->
        <main class="lg:col-span-3">
          <!-- Results Summary -->
          <div class="wireframe-box doodle-border p-4 mb-6">
            <div class="flex items-center justify-between">
              <p class="wireframe-text">
                Showing <strong>1-24</strong> of <strong>1,247</strong> results for "smartphones"
              </p>
              <div class="flex items-center gap-4">
                <span class="wireframe-text text-sm">View:</span>
                <div class="flex gap-2">
                  <button class="p-2 wireframe-box doodle-border" style="background-color: var(--color-theme-button); color: var(--color-theme-button-text);">
                    <Icon name="bx:bx-grid-alt" class="w-4 h-4" />
                  </button>
                  <button class="p-2 wireframe-box doodle-border hover:bg-gray-50">
                    <Icon name="bx:bx-list-ul" class="w-4 h-4" />
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Active Filters -->
          <div class="mb-6">
            <div class="flex flex-wrap gap-2">
              <span class="wireframe-text text-sm">Active filters:</span>
              <div class="flex flex-wrap gap-2">
                <span class="inline-flex items-center gap-2 px-3 py-1 text-sm wireframe-box doodle-border" 
                      style="background-color: var(--color-theme-secondary); color: var(--color-theme-button-text);">
                  Electronics
                  <Icon name="bx:bx-x" class="w-3 h-3 cursor-pointer" />
                </span>
                <span class="inline-flex items-center gap-2 px-3 py-1 text-sm wireframe-box doodle-border" 
                      style="background-color: var(--color-theme-secondary); color: var(--color-theme-button-text);">
                  $100 - $250
                  <Icon name="bx:bx-x" class="w-3 h-3 cursor-pointer" />
                </span>
                <span class="inline-flex items-center gap-2 px-3 py-1 text-sm wireframe-box doodle-border" 
                      style="background-color: var(--color-theme-secondary); color: var(--color-theme-button-text);">
                  4+ Stars
                  <Icon name="bx:bx-x" class="w-3 h-3 cursor-pointer" />
                </span>
                <button class="wireframe-text text-sm hover:underline" style="color: var(--color-theme-button);">
                  Clear all
                </button>
              </div>
            </div>
          </div>

          <!-- Product Grid -->
          <ProductGrid 
            columns="3"
            products={[
              {
                name: "iPhone 15 Pro Max",
                price: "$1,199",
                originalPrice: "$1,299",
                rating: 4.8,
                reviews: 245,
                image: "smartphone-1.jpg",
                badge: "Best Seller",
                features: ["256GB", "Pro Camera", "5G Ready"]
              },
              {
                name: "Samsung Galaxy S24 Ultra",
                price: "$1,099",
                rating: 4.7,
                reviews: 189,
                image: "smartphone-2.jpg",
                badge: "New",
                features: ["512GB", "S Pen", "AI Enhanced"]
              },
              {
                name: "Google Pixel 8 Pro",
                price: "$899",
                originalPrice: "$999",
                rating: 4.6,
                reviews: 156,
                image: "smartphone-3.jpg",
                badge: "Sale",
                features: ["128GB", "Pure Android", "AI Photos"]
              },
              {
                name: "OnePlus 12",
                price: "$799",
                rating: 4.5,
                reviews: 134,
                image: "smartphone-4.jpg",
                features: ["256GB", "Fast Charging", "Gaming Mode"]
              },
              {
                name: "Xiaomi 14 Pro",
                price: "$699",
                rating: 4.4,
                reviews: 98,
                image: "smartphone-5.jpg",
                badge: "Value Pick",
                features: ["128GB", "Leica Camera", "HyperOS"]
              },
              {
                name: "Nothing Phone (2)",
                price: "$599",
                rating: 4.3,
                reviews: 87,
                image: "smartphone-6.jpg",
                features: ["256GB", "Glyph Interface", "Clean UI"]
              }
            ]}
            showQuickActions={true}
          />

          <!-- Load More Section -->
          <div class="text-center mt-12">
            <div class="wireframe-box doodle-border p-6 max-w-md mx-auto">
              <p class="wireframe-text mb-4">Showing 24 of 1,247 products</p>
              <div class="flex flex-col sm:flex-row gap-3 justify-center">
                <Link
                  href="#"
                  class="doodle flex items-center justify-center gap-2"
                  size="md"
                  style="primary">
                  <Icon name="bx:bx-refresh" class="w-4 h-4" />
                  Load More Products
                </Link>
                <Link
                  href="#"
                  class="doodle flex items-center justify-center gap-2"
                  size="md"
                  style="outline">
                  <Icon name="bx:bx-list-ol" class="w-4 h-4" />
                  View All Results
                </Link>
              </div>
            </div>
          </div>
        </main>
      </div>
    </Container>
  </section>

  <!-- Recently Viewed Section -->
  <section class="wireframe-section py-12" style="background-color: var(--color-theme-section-bg);">
    <Container>
      <div class="text-center mb-8">
        <h2 class="wireframe-heading text-2xl lg:text-3xl mb-3">Recently Viewed</h2>
        <p class="wireframe-text">Products you've looked at recently</p>
      </div>

      <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
        <div class="wireframe-box doodle-border p-4 text-center">
          <div class="wireframe-box doodle-border mb-3 h-24 flex items-center justify-center">
            <Icon name="bx:bx-mobile-alt" class="w-8 h-8" style="color: var(--color-theme-tertiary);" />
          </div>
          <p class="wireframe-text text-sm">iPhone 14</p>
          <p class="wireframe-heading text-sm">$899</p>
        </div>
        <div class="wireframe-box doodle-border p-4 text-center">
          <div class="wireframe-box doodle-border mb-3 h-24 flex items-center justify-center">
            <Icon name="bx:bx-laptop" class="w-8 h-8" style="color: var(--color-theme-tertiary);" />
          </div>
          <p class="wireframe-text text-sm">MacBook Pro</p>
          <p class="wireframe-heading text-sm">$1,999</p>
        </div>
        <div class="wireframe-box doodle-border p-4 text-center">
          <div class="wireframe-box doodle-border mb-3 h-24 flex items-center justify-center">
            <Icon name="bx:bx-headphone" class="w-8 h-8" style="color: var(--color-theme-tertiary);" />
          </div>
          <p class="wireframe-text text-sm">AirPods Pro</p>
          <p class="wireframe-heading text-sm">$249</p>
        </div>
        <div class="wireframe-box doodle-border p-4 text-center">
          <div class="wireframe-box doodle-border mb-3 h-24 flex items-center justify-center">
            <Icon name="bx:bx-time" class="w-8 h-8" style="color: var(--color-theme-tertiary);" />
          </div>
          <p class="wireframe-text text-sm">Apple Watch</p>
          <p class="wireframe-heading text-sm">$399</p>
        </div>
        <div class="wireframe-box doodle-border p-4 text-center">
          <div class="wireframe-box doodle-border mb-3 h-24 flex items-center justify-center">
            <Icon name="bx:bx-camera" class="w-8 h-8" style="color: var(--color-theme-tertiary);" />
          </div>
          <p class="wireframe-text text-sm">Canon EOS</p>
          <p class="wireframe-heading text-sm">$1,299</p>
        </div>
        <div class="wireframe-box doodle-border p-4 text-center">
          <div class="wireframe-box doodle-border mb-3 h-24 flex items-center justify-center">
            <Icon name="bx:bx-game" class="w-8 h-8" style="color: var(--color-theme-tertiary);" />
          </div>
          <p class="wireframe-text text-sm">PlayStation 5</p>
          <p class="wireframe-heading text-sm">$499</p>
        </div>
      </div>
    </Container>
  </section>

  <!-- Newsletter Signup -->
  <section class="wireframe-section py-12">
    <Container>
      <div class="wireframe-box doodle-border p-8 max-w-2xl mx-auto text-center">
        <Icon name="bx:bx-envelope" class="w-12 h-12 mx-auto mb-4" style="color: var(--color-theme-button);" />
        <h3 class="wireframe-heading text-xl mb-3">Stay Updated on New Products</h3>
        <p class="wireframe-text mb-6">Get notified about new arrivals, exclusive deals, and product recommendations.</p>
        <div class="flex flex-col sm:flex-row gap-3 max-w-md mx-auto">
          <div class="flex-1 wireframe-box doodle-border p-3">
            <input type="email" placeholder="Enter your email" class="w-full bg-transparent wireframe-text text-sm outline-none" />
          </div>
          <Link
            href="#"
            class="doodle flex items-center justify-center gap-2"
            size="md"
            style="primary">
            <Icon name="bx:bx-send" class="w-4 h-4" />
            Subscribe
          </Link>
        </div>
        <p class="wireframe-text text-xs mt-3" style="color: var(--color-theme-tertiary);">
          No spam, unsubscribe anytime. Read our privacy policy.
        </p>
      </div>
    </Container>
  </section>
</Layout>